(function(e,t,n){function f(e){e=e||location.href;return"#"+e.replace(/^[^#]*#?(.*)$/,"$1")}var r="hashchange",i=document,s,o=e.event.special,u=i.documentMode,a="on"+r in t&&(u===n||u>7);e.fn[r]=function(e){return e?this.bind(r,e):this.trigger(r)};e.fn[r].delay=50;o[r]=e.extend(o[r],{setup:function(){if(a){return false}e(s.start)},teardown:function(){if(a){return false}e(s.stop)}});s=function(){function m(){var n=f(),i=v(u);if(n!==u){p(u=n,i);e(t).trigger(r)}else{if(i!==u){location.href=location.href.replace(/#.*/,"")+i}}o=setTimeout(m,e.fn[r].delay)}var s={},o,u=f(),l=function(e){return e},p=l,v=l;s.start=function(){o||m()};s.stop=function(){o&&clearTimeout(o);o=n};e.browser.msie&&!a&&function(){var t,n;s.start=function(){if(!t){n=e.fn[r].src;n=n&&n+f();t=e('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){n||p(f());m()}).attr("src",n||"javascript:0").insertAfter("body")[0].contentWindow;i.onpropertychange=function(){try{if(event.propertyName==="title"){t.document.title=i.title}}catch(e){}}}};s.stop=l;v=function(){return f(t.location.href)};p=function(n,s){var o=t.document,u=e.fn[r].domain;if(n!==s){o.title=i.title;o.open();u&&o.write('<script>document.domain="'+u+'"</script>');o.close();t.location.hash=n}}}();return s}()})(jQuery,this);(function(e){if(!e.hash)e.hash="#!/";if(!e.siteurl)e.siteurl=document.location.protocol+"//"+document.location.host;if(!e.container)e.container="#content";e.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/(iPod|iPhone|iPad|WebApps\/.+CFNetwork)/);e.fn.pjax=function(t,n){if(n)n.container=t;else n=e.isPlainObject(t)?t:{container:t};if(n.container&&typeof n.container!=="string"){throw"pjax container must be a string selector!";return false}return this.live("click",function(t){if(t.which>1||t.metaKey)return true;var r={url:this.href,container:e(this).attr("data-pjax"),clickedElement:e(this),fragment:null,isform:false};e.pjax(e.extend({},r,n));t.preventDefault()})};e.fn.pjaxform=function(t,n){if(n)n.container=t;else n=e.isPlainObject(t)?t:{container:t};if(typeof n.container!=="string"){throw"pjax container must be a string selector!";return false}return this.live("submit",function(t){e(n.container).trigger("form-submit.pjax",e(this));if(typeof n.serialize!=="undefined"){var r=n.serialize(this)}else{var r=e(this).serialize()}n.type=e(this).attr("method");var i={url:n.type&&n.type.toUpperCase()=="GET"?this.action+"?"+r:this.action,push:n.type&&n.type.toUpperCase()=="GET"?true:false,data:r,isform:true,container:e(this).attr("data-pjax"),clickedElement:e(this)};e.pjax(e.extend({},i,n));t.preventDefault()})};var t=e.pjax=function(n){var r=e(n.container),i=n.success||e.noop,s=[];delete n.success;if(typeof n.container!=="string")throw"pjax container must be a string selector!";n=e.extend(true,{},t.defaults,n);if(e.isFunction(n.url)){n.url=n.url()}n.context=r;n.success=function(r,o,u){if(n.fragment){var a=e(r).find(n.fragment);if(a.length)r=a.children();else return window.location=n.url}else{if(!e.trim(r)||/<html/i.test(r))return window.location=n.url}this.html(r);var f=document.title,l=e.trim(this.find("title").remove().text());if(l)document.title=l;var c={pjax:n.container,fragment:n.fragment,timeout:n.timeout};if(e.support.pjax){var h=e.param(n.data);if(h!="_pjax=true")c.url=n.url+(/\?/.test(n.url)?"&":"?")+h;if(n.replace){window.history.replaceState(c,document.title,n.url)}else if(n.push){if(!t.active){window.history.replaceState(e.extend({},c,{url:null}),f);t.active=true}window.history.pushState(c,document.title,n.url)}if((n.replace||n.push)&&window._gaq)_gaq.push(["_trackPageview"]);var p=window.location.hash.toString();if(p!==""){window.location.hash=p}}else{if(!n.isform||n.type.toUpperCase()=="GET"){window.location.hash="!"+n.url.replace(n.siteurl,"");e.hash=window.location.hash}}i.apply(this,arguments);this.trigger("success.pjax",[r,o,u,s])};n.beforeSend=function(t,n){t.setRequestHeader("X-PJAX","true");t.setRequestHeader("X-PJAX-SUPPORT",e.support.pjax?true:false);t.setRequestHeader("X-Referer",e.support.pjax?window.location.href:window.location.href.replace("/#!",""));s=n;this.trigger("start.pjax",[t,s]);clearTimeout(r);clearTimeout(i);e(document).skylo("end");e(document).skylo("start");var r=setTimeout(function(){e(document).skylo("set",30)},100);var i=setTimeout(function(){e(document).skylo("set",70)},200);e("#yii_bootstrap_collapse_0").collapse("hide")};n.error=function(e,t,r){this.trigger("error.pjax",[e,t,r,s]);if(t!=="abort"){window.location=n.url}};n.complete=function(t,n){this.trigger("complete.pjax",[t,n,s]);e(document).skylo("end");refreshbinds()};var o=t.xhr;if(o&&o.readyState<4){o.onreadystatechange=e.noop;o.abort();e(document).skylo("abort")}t.xhr=e.ajax(n);e(document).trigger("pjax",[t.xhr,n]);return t.xhr};t.defaults={timeout:2e3,push:true,replace:false,url:e.support.pjax?window.location.href:window.location.hash.substr(2),data:{_pjax:true},cache:false,type:"GET",dataType:"html",siteurl:e.siteurl};var n="state"in window.history,r=location.href;e(window).bind("popstate",function(t){var i=!n&&location.href==r;n=true;if(i)return;var s=t.state;if(s&&s.pjax){var o=s.pjax;if(e(o+"").length)e.pjax({url:s.url||location.href,fragment:s.fragment,container:o,push:false,timeout:s.timeout});else window.location=location.href}});if(e.inArray("state",e.event.props)<0)e.event.props.push("state");var i=window.location.hash.toString();if(i.length>0){if(e.support.pjax&&i.match(/^#!\/.*/))location=e.siteurl+i.substr(2)}else if(location.pathname.length>1||location.search.length>1){if(!e.support.pjax)window.location=e.siteurl+"/#!"+window.location.pathname+window.location.search}if(!e.support.pjax){e(window).hashchange(function(){i=window.location.hash;if((i.substr(0,2)=="#!"||i=="")&&i!=e.hash){e.ajax({type:"GET",cache:false,url:e.siteurl+i.replace("#!",""),beforeSend:function(t,n){t.setRequestHeader("X-PJAX","true");t.setRequestHeader("X-PJAX-SUPPORT",e.support.pjax?true:false);t.setRequestHeader("X-Referer",e.hash.replace("#!",""));$settings=n;e(e.container).trigger("start.pjax",[t,$settings]);e("#page").animate({opacity:.25},200)},success:function(t,n,r){e(e.container).html(t);e(e.container).trigger("success.pjax",[t,n,r,$settings]);e("#page").animate({opacity:1},200);refreshbinds()},complete:function(t,n){e(e.container).trigger("complete.pjax",[t,n,$settings]);refreshbinds()},error:function(t,n,r){e(e.container).trigger("error.pjax",[t,n,r,$settings])}})}});e(window).hashchange()}})(jQuery)